<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=../assets/images/favicon.png><meta name=generator content="mkdocs-1.1.2, mkdocs-material-5.4.0"><title>Usecase</title><link rel=stylesheet href=../assets/stylesheets/main.fe0cca5b.min.css><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-1855461-3","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}),document.addEventListener("DOMContentSwitch",function(){ga("send","pageview")})</script><script async src=https://www.google-analytics.com/analytics.js></script></head> <body dir=ltr> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#philosophy class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid" aria-label=Header> <a href=.. title="Yatta Language" class="md-header-nav__button md-logo" aria-label="Yatta Language"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg> </a> <label class="md-header-nav__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header-nav__title data-md-component=header-title> <div class=md-header-nav__ellipsis> <span class="md-header-nav__topic md-ellipsis"> Yatta Language </span> <span class="md-header-nav__topic md-ellipsis"> Usecase </span> </div> </div> <label class="md-header-nav__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear data-md-component=search-reset tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header-nav__source> <a href=https://github.com/yatta-lang/yatta/ title="Go to repository" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg> </div> <div class=md-source__repository> yatta-lang/yatta </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title="Yatta Language" class="md-nav__button md-logo" aria-label="Yatta Language"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg> </a> Yatta Language </label> <div class=md-nav__source> <a href=https://github.com/yatta-lang/yatta/ title="Go to repository" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg> </div> <div class=md-source__repository> yatta-lang/yatta </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. title=Home class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Usecase <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg> </span> </label> <a href=./ title=Usecase class="md-nav__link md-nav__link--active"> Usecase </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#philosophy class=md-nav__link> Philosophy </a> </li> <li class=md-nav__item> <a href=#execution-model class=md-nav__link> Execution Model </a> <nav class=md-nav aria-label="Execution Model"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#example class=md-nav__link> Example </a> <nav class=md-nav aria-label=Example> <ul class=md-nav__list> <li class=md-nav__item> <a href=#simplifying-the-example-by-using-resource-managemenet class=md-nav__link> Simplifying the example by using resource managemenet </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#implementation class=md-nav__link> Implementation </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#evaluation class=md-nav__link> Evaluation </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3 type=checkbox id=nav-3> <label class=md-nav__link for=nav-3> Getting Started <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Getting Started" data-md-level=1> <label class=md-nav__title for=nav-3> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../installation/ title=Installation class=md-nav__link> Installation </a> </li> <li class=md-nav__item> <a href=../release-notes/ title="Release Notes" class=md-nav__link> Release Notes </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../syntax/ title=Syntax class=md-nav__link> Syntax </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-5 type=checkbox id=nav-5> <label class=md-nav__link for=nav-5> Features <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Features data-md-level=1> <label class=md-nav__title for=nav-5> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Features </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../operators/ title=Operators class=md-nav__link> Operators </a> </li> <li class=md-nav__item> <a href=../data-types/ title="Data Types" class=md-nav__link> Data Types </a> </li> <li class=md-nav__item> <a href=../pattern-matching/ title="Pattern Matching" class=md-nav__link> Pattern Matching </a> </li> <li class=md-nav__item> <a href=../module-loader/ title="Module Loader" class=md-nav__link> Module Loader </a> </li> <li class=md-nav__item> <a href=../polyglot/ title="Polyglot APIs" class=md-nav__link> Polyglot APIs </a> </li> <li class=md-nav__item> <a href=../resource-management/ title="Resource Management" class=md-nav__link> Resource Management </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../stdlib title="Standard Library" class=md-nav__link> Standard Library </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#philosophy class=md-nav__link> Philosophy </a> </li> <li class=md-nav__item> <a href=#execution-model class=md-nav__link> Execution Model </a> <nav class=md-nav aria-label="Execution Model"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#example class=md-nav__link> Example </a> <nav class=md-nav aria-label=Example> <ul class=md-nav__list> <li class=md-nav__item> <a href=#simplifying-the-example-by-using-resource-managemenet class=md-nav__link> Simplifying the example by using resource managemenet </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#implementation class=md-nav__link> Implementation </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#evaluation class=md-nav__link> Evaluation </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <a href=https://github.com/yatta-lang/yatta/edit/master/docs/usecase.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <h1>Usecase</h1> <h2 id=philosophy>Philosophy<a class=headerlink href=#philosophy title="Permanent link">&para;</a></h2> <p>For those familiar with other functional programming languages, such as Lisp, Haskell or Erlang, most of the concepts mentioned in this documentation are not totally alien. This section would nevertheless focus on why particular features are present in Yatta while others are not. For readers more familiar with other paradigms, such as object oriented or imperative programming, this section should be about eliminating some concerns users of these languages might have.</p> <p>Yatta does not support <strong>imperative programming</strong>, as that requires explicit control flow and state manipulation. An example for that is a loop with a counter, that gets increased at each step. Yatta does not have variables that could be modified, nor does it have "loops" in the imperative sense. Instead <a href=../syntax/#loops-recursion-and-generators>recursion or generators</a> may be used for iteration.</p> <p>When it comes to <strong>object oriented</strong> features, it's important to separate two things. One is that most common feature of object oriented languages, encapsulation, in the traditional sense is about hiding mutable state. As previously stated, Yatta doesn't have mutable state, so hiding it in an object doesn't provide much of a value. Yatta is a lexically scoped language though and fully supports hiding internal implementation details either via scoping expressions (<code>let</code>, <code>do</code> or <code>case</code>), or using closures as well (lambdas). This means that a particular alias or a name is only available within the scope in which it is defined. Moreover, <a href=../syntax/#module-expression>modules</a> allow user to expose only certain functions, and not others. This is a form of interface concept, as it is known in the object oriented world.</p> <p>Polymorophism can take various shapes in Yatta. First obvious option that comes to mind, is using pattern matching. A function can be defined for different patterns and in that way replicate polymorphic methods from object oriented languages. Another possibility could be having multiple modules defined, with the same interface (exposed functions) and switch them dynamically based on any arbitrary conditions the user needs. There is a lot of flexibility in Yatta due to its dynamic nature.</p> <p>When it comes to <strong>statically typed functional</strong> languages, such as Haskell or Elm, one might wonder about things like purity, type classes or Algebraic Data Types (ADTs). Yatta is not a pure language, in the sense that it does not enforce separation of side effects and pure computations (side-effect free). Side effects represent operations modifying an external state, for example some kind of a global state, input/output, etc. </p> <p>Type classes have no real counterpart in Yatta since Yatta is dynamically typed. What would otherwise be achieved using type classes, would have to be achieved by a convention of sorts in Yatta, for example that there would be an expectation of certain modules to export certain interface.</p> <p>ADTs in Yatta do not need to be defined upfront, as there is no compilation phase to check their validity or perform exhaustivness checks (where a compiler ensures that all possible cases are being tested in a <code>case</code> expression). That doesn't mean that ADTs cannot be modeled in Yatta, they can, they just won't have a static type check performed on them before running the program. They may be represented using <a href=../data-types/ >symbols</a>, <a href=../data-types/ >tuples</a> or <a href=../syntax/#records>records</a>, or any combination of those.</p> <h2 id=execution-model>Execution Model<a class=headerlink href=#execution-model title="Permanent link">&para;</a></h2> <p>Yatta provides fully transparent runtime system that integrates asynchronous non-blocking IO features with concurrent execution of the code. This means, there is no special syntax or special data types representing asynchronous computations. Everything related to non-blocking IO is hidden within the runtime and exposed via the standard library, and all expressions consisting of asynchronous expressions(an asynchronous expression is usually obtained from the standard library or created by function <a href=../stdlib/functions/async/ ><code>async</code></a>) are evaluated in asynchronous, non-blocking matter.</p> <p>This approach provides several benefits to languages as opposed to having these features provided via external libaries, mainly that such library would have to be adopted by other libraries/frameworks in order to be usable and it would still impose additional boilerplate simply because libraries cannot typically change language syntax/semantics. This is why Yatta provides these features from day one, built into language syntax and semantics and therefore it is always available to any program without any external dependencies. At the same time, putting these features directly on the language/runtime level allows for additional optimizations that could otherwise be tricky or impossible.</p> <h3 id=example>Example<a class=headerlink href=#example title="Permanent link">&para;</a></h3> <p>Following example will be used as a case study into Yatta's execution model.</p> <div class=highlight><pre><span></span><code><span class=kr>let</span>
    <span class=n>keys_file</span> <span class=ow>=</span> <span class=kt>File</span><span class=ow>::</span><span class=n>open</span> <span class=s>&quot;tests/Keys.txt&quot;</span> <span class=p>{</span><span class=kt>:</span><span class=n>read</span><span class=p>}</span>
    <span class=n>values_file</span> <span class=ow>=</span> <span class=kt>File</span><span class=ow>::</span><span class=n>open</span> <span class=s>&quot;tests/Values.txt&quot;</span> <span class=p>{</span><span class=kt>:</span><span class=n>read</span><span class=p>}</span>

    <span class=n>keys</span> <span class=ow>=</span> <span class=kt>File</span><span class=ow>::</span><span class=n>read_lines</span> <span class=n>keys_file</span>
    <span class=n>values</span> <span class=ow>=</span> <span class=kt>File</span><span class=ow>::</span><span class=n>read_lines</span> <span class=n>values_file</span>

    <span class=nb>()</span> <span class=ow>=</span> <span class=kt>File</span><span class=ow>::</span><span class=n>close</span> <span class=n>keys_file</span>
    <span class=nb>()</span> <span class=ow>=</span> <span class=kt>File</span><span class=ow>::</span><span class=n>close</span> <span class=n>values_file</span>
<span class=kr>in</span>
    <span class=kt>Seq</span><span class=ow>::</span><span class=n>zip</span> <span class=n>keys</span> <span class=n>values</span> <span class=o>|&gt;</span> <span class=kt>Dict</span><span class=ow>::</span><span class=n>from_seq</span>
</code></pre></div> <p>In this example, both files are read concurrently, without having to write any additional boiler-plate.</p> <p>How does Yatta do this? A couple of things: first, check the difference between the <a href=../syntax/#do-expression><code>do</code></a> and <a href=../syntax/#let-expression><code>let</code></a> expressions on the <a href=../syntax/ >syntax</a> page. They both are used to evaluate multiple steps of computation, however <code>do</code> ensures that the steps take place in the same sequence as they are defined, <code>let</code> tries to parallelize non-blocking tasks.</p> <p>Yatta will first perform a <strong>static analysis</strong> of the <code>let</code> expression in order to determine <strong>dependencies between aliases/steps</strong>. It knows that <code>keys_file</code> and <code>values_file</code> are used in the <a href=../stdlib/file/#read-lines><code>File::read_lines</code></a> function and also knows that <code>keys</code> and <code>values</code> <strong>do not depend on each other</strong>, and so they <strong>may be ran concurrently</strong>. Yatta doesn't parallelize <code>keys_file</code> and <code>values_file</code>, nor does it parallelize closing files - even though it seemingly should - there are no dependencies between these lines either. The trick is that <a href=../stdlib/file/#read-lines><code>File::read_lines</code></a> is a function that returns a runtime level Promise (hidden from the user), and that means that reading two files in parallel is actually fine, since otherwise Yatta would need to block the execution there, so it can just block on both being read at once.</p> <p>Another important concept here is that the <strong>order of aliases defined in the <code>let</code> expression does matter</strong>. Yatta <strong>doesn't just randomly re-arrange</strong> them based on dependencies alone. If it did, it could for example close those files before they are ever read. That would be incorrect. Yatta just uses static analysis of this expression to determine which aliases can be "batched" and actually batches the execution if they provide underlying Promises. Then the whole expression is transformed into something like this:</p> <ol> <li> <p>Execute batch 1 (sequentially, since File::open does not return a Promise): <div class=highlight><pre><span></span><code><span class=nf>keys_file</span> <span class=ow>=</span> <span class=kt>File</span><span class=ow>::</span><span class=n>open</span> <span class=s>&quot;tests/Keys.txt&quot;</span> <span class=p>{</span><span class=kt>:</span><span class=n>read</span><span class=p>}</span>
<span class=nf>values_file</span> <span class=ow>=</span> <span class=kt>File</span><span class=ow>::</span><span class=n>open</span> <span class=s>&quot;tests/Values.txt&quot;</span> <span class=p>{</span><span class=kt>:</span><span class=n>read</span><span class=p>}</span>
</code></pre></div></p> </li> <li> <p>Execute batch 2 (in parallel, since File::read_lines does return a Promise): <div class=highlight><pre><span></span><code><span class=nf>keys</span> <span class=ow>=</span> <span class=kt>File</span><span class=ow>::</span><span class=n>read_lines</span> <span class=n>keys_file</span>
<span class=nf>values</span> <span class=ow>=</span> <span class=kt>File</span><span class=ow>::</span><span class=n>read_lines</span> <span class=n>values_file</span>
</code></pre></div></p> </li> <li> <p>Result from batch 2 is a Promise aggregating both keys and values, which when complete, executes batch 3: <div class=highlight><pre><span></span><code><span class=nb>()</span> <span class=ow>=</span> <span class=kt>File</span><span class=ow>::</span><span class=n>close</span> <span class=n>keys_file</span>
<span class=nb>()</span> <span class=ow>=</span> <span class=kt>File</span><span class=ow>::</span><span class=n>close</span> <span class=n>values_file</span>
</code></pre></div></p> </li> <li> <p>Finally, the whole let expression is now a Promise, so run the final expression whenever it is ready: <div class=highlight><pre><span></span><code><span class=kt>Seq</span><span class=ow>::</span><span class=n>zip</span> <span class=n>keys</span> <span class=n>values</span> <span class=o>|&gt;</span> <span class=kt>Dict</span><span class=ow>::</span><span class=n>from_seq</span> <span class=o>|&gt;</span> <span class=n>println</span>
</code></pre></div> Yatta automatically chains runtime Promises as needed and, more than that, it "unwraps" them whenever they are complete, so the runtime doesn't actually get bloated with propagating Promises all over the place. As soon as a Promise is computed, it becomes just a regular value again.</p> </li> </ol> <p>These concepts allows programmers to focus on expressing concurrent programs much more easily and not having to deal with the details of the actual execution order. Additionally, when code must be executed sequentially, without explicit dependencies, a special expression <code>do</code> is available.</p> <h4 id=simplifying-the-example-by-using-resource-managemenet>Simplifying the example by using resource managemenet<a class=headerlink href=#simplifying-the-example-by-using-resource-managemenet title="Permanent link">&para;</a></h4> <p>This example that concurrenly reads two files, line by line, and produces pairs of them as a dictionary can be implemented in Yatta using its <a href=../resource-management/ >resource management</a> features, as of Yatta 0.8.1.</p> <p>Shorter version, equivalent in terms of features, but actually properly handling errors would look like:</p> <div class=highlight><pre><span></span><code><span class=kr>let</span>
    <span class=n>keys</span>   <span class=ow>=</span> <span class=n>with</span> <span class=kt>File</span><span class=ow>::</span><span class=n>open</span> <span class=s>&quot;tests/Keys.txt&quot;</span> <span class=p>{</span><span class=kt>:</span><span class=n>read</span><span class=p>}</span>   <span class=n>as</span> <span class=n>keys_file</span>    <span class=kt>File</span><span class=ow>::</span><span class=n>read_lines</span> <span class=n>keys_file</span>   <span class=n>end</span>
    <span class=n>values</span> <span class=ow>=</span> <span class=n>with</span> <span class=kt>File</span><span class=ow>::</span><span class=n>open</span> <span class=s>&quot;tests/Values.txt&quot;</span> <span class=p>{</span><span class=kt>:</span><span class=n>read</span><span class=p>}</span> <span class=n>as</span> <span class=n>values_file</span>  <span class=kt>File</span><span class=ow>::</span><span class=n>read_lines</span> <span class=n>values_file</span> <span class=n>end</span>
<span class=kr>in</span>
    <span class=kt>Seq</span><span class=ow>::</span><span class=n>zip</span> <span class=n>keys</span> <span class=n>values</span> <span class=o>|&gt;</span> <span class=kt>Dict</span><span class=ow>::</span><span class=n>from_seq</span>
</code></pre></div> <p>Note that if error arises in the original example, files would not be closed. In this improved example they would. Otherwise, everything else regarding the non-blocking and parallel nature of this code stands.</p> <h3 id=implementation>Implementation<a class=headerlink href=#implementation title="Permanent link">&para;</a></h3> <p>In terms of implementation, the runtime system of Yatta can be viewed in terms of promise pipelineing or call-streams. The difference is that this pipelining and promise abstraction as such is completely transparent to the programmer and exists solely on the runtime level.</p> <h2 id=evaluation>Evaluation<a class=headerlink href=#evaluation title="Permanent link">&para;</a></h2> <p>Evaluation of an Yatta program consists of evaluating a single expression. This is important, because everything, including module definitions are simple expressions in Yatta.</p> <p>Module loader then takes advantage of this principle, knowing that an imported module will be a file defining a module expression. It can simply evaluate it and retrieve the module itself.</p> <hr> <div class=md-source-date> <small> Last update: July 1, 2020 </small> </div> </article> </div> </div> </main> </div> <script src=../assets/javascripts/vendor.d710d30a.min.js></script> <script src=../assets/javascripts/bundle.b39636ac.min.js></script><script id=__lang type=application/json>{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script> <script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.a68abb33.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script> </body> </html>